# Project llexicom: Gemini Agent Guide

This document provides essential context for working on the llexicom project.

---

### **IMPORTANT: Directory Restrictions**

-   **Do not list the contents of `dict/en/ja/`** (e.g., using `ls`). It contains a very large number of subdirectories, and listing them will consume the context window. To inspect a sample, read the `dict/en/ja/sample/data.json` file directly.
-   **Do not run search commands like `find` or `grep` on the `dict/en/ja/` directory.** Its size will cause significant performance issues.

---

## Directory Descriptions

### `dict/`

Contains the English-Japanese dictionary data in JSON format. As noted above, avoid running search or listing commands in this directory. To see an example, view the `dict/en/ja/sample/data.json` file.

### `docs/`

Contains the final, static output of the service. The entire dictionary application is provided as a set of static files. All JavaScript files in this directory are generated by the build process.

-   **`docs/index.html`**: The main HTML file for the dictionary's frontend. The service is designed to be served as a static site from a CDN or any static web host.
-   **`docs/index.js`**: The main JavaScript bundle for the application, generated by Webpack from the TypeScript sources in `scripts/`. It serves as the client-side entry point and includes the binary search index. When a user searches for a word (e.g., `foo`), the application performs a binary search on an index within this file to locate the correct data chunk. It then fetches the corresponding compressed data file (e.g., `foo.json.lz`), which contains hundreds of word definitions. The browser decompresses this file on-the-fly to find and display the requested content.
-   **`docs/quiz.*`**: These files are related to a planned English word quiz feature. This feature is not connected to the main dictionary service and should be ignored for now.

### `scripts/`

Contains the core application logic. The Ruby scripts in this directory are for dictionary maintenance and can be ignored. The focus should be on the TypeScript files.

-   **`scripts/index.ts`**: The main entry point for the client-side application. It initializes the `Finder` service, handles user input from the search box, manages browser history (`pushState`), and orchestrates the rendering of search results or sample words by calling functions from `render.ts`.
-   **`scripts/finder.ts`**: A client-side service that performs binary searches for words, fetches compressed data chunks, and caches the decompressed data in memory.
-   **`scripts/word_data.ts`**: Defines the `WordData` TypeScript interface, which represents the structure of a single dictionary entry.
-   **`scripts/render.ts`**: Handles rendering the dictionary data to the HTML page using Mustache templates.
-   **`scripts/table.ts`**: Contains the auto-generated index data required for the binary search. This file is generated by a Ruby script and then compiled into the final JavaScript bundle by Webpack.

### `example/` & `templates/`

These directories contain example data and old templates. They can be ignored.
